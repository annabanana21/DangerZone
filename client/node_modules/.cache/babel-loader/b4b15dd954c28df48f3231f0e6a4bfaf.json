{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/avmas/Desktop/dangerzone/client/src/controller/GameController.jsx\";\nimport React from 'react';\nimport Main from '../pages/main';\nimport axios from 'axios';\nimport Display from '../pages/display';\nimport BinarySearchTree from '../functions/binary';\nimport iconPicker from '../functions/iconPicker';\nimport Loading from '../pages/loading';\nimport EndScreen from '../components/EndScreen/EndScreen';\nimport earth from \"../assets/Icons/Earthquake.svg\";\nimport cold from \"../assets/Icons/ColdWave.svg\";\nimport tornado from \"../assets/Icons/Hurricane.svg\";\nconst pingURL = process.env.REACT_APP_BACKEND_SERVER || 'http://localhost:8080';\n\nclass GameController extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.manualSet = keyWord => {\n      let details = this.games.find(game => game[2] === keyWord);\n      let weather = this.state.weather[3];\n\n      if (weather < -20 && details[0] !== 'DEEP FREEZE') {\n        weather = weather + 40;\n      } else if (weather > -40 && details[0] === 'DEEP FREEZE') {\n        weather = weather - 40;\n      }\n\n      this.setState({\n        weather: [...details, weather]\n      });\n    };\n\n    this.getCoordinates = position => {\n      const long = position.coords.longitude;\n      const lat = position.coords.latitude;\n      axios.get('https://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + long + '&appid=' + this.apiKey).then(results => {\n        this.setState({\n          weather: iconPicker(results.data)\n        });\n        this.getStoryLine(this.state.weather[2]);\n      });\n    };\n\n    this.getLocation = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(this.getCoordinates);\n      }\n    };\n\n    this.state = {\n      isHome: false,\n      isPlaying: false,\n      load: true,\n      ended: false,\n      lastStory: false,\n      story: [],\n      storyLeft: [],\n      userStats: {\n        health: 100,\n        lost: false\n      },\n      weather: [],\n      population: Math.floor(Math.random() * 2000000) + 250000\n    };\n    this.apiKey = '4774ad80334f760f9b45af484c39e9fe';\n    this.games = [['TORNADO WARNING', tornado, 'wind'], ['DEEP FREEZE', cold, 'freeze'], ['EARTHQUAKE WARNING', earth, 'earth']];\n  }\n\n  refresh(keyWord) {\n    console.log(keyWord);\n\n    if (!keyWord) {\n      this.getLocation();\n    } else {\n      this.manualSet(keyWord);\n      this.getStoryLine(keyWord);\n    }\n\n    this.setState({\n      isHome: true,\n      isPlaying: false,\n      ended: false,\n      lastStory: false,\n      userStats: {\n        health: 100,\n        lost: false\n      }\n    });\n  }\n\n  popSetter(newPopulation) {\n    this.setState({\n      population: newPopulation\n    });\n  }\n\n  formatData(arr) {\n    return arr.map(object => {\n      let newTree = new BinarySearchTree();\n      newTree.insertAll(object.scenario);\n      return {\n        intro: object.intro,\n        title: object.title,\n        background: object.background,\n        audio: object.sound,\n        category: object.category,\n        tree: newTree\n      };\n    });\n  }\n\n  getStoryLine(category) {\n    axios.get('http://localhost:8080/story/' + category).then(res => {\n      let storyLine = this.formatData(res.data);\n      this.setState({\n        story: storyLine,\n        storyLeft: [...storyLine]\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.getLocation();\n  }\n\n  change() {\n    this.setState({\n      isHome: !this.state.isHome,\n      isPlaying: !this.state.isPlaying\n    });\n  }\n\n  lose(healthLoss, home) {\n    let goHome = home;\n    let newHealth = this.state.userStats.health - healthLoss;\n    let theyLost = false;\n    let ended = false;\n    let isPlaying = !home;\n\n    if (newHealth <= 0) {\n      theyLost = true;\n      newHealth = 0;\n      ended = true;\n      isPlaying = false;\n      goHome = false;\n    }\n\n    if (this.state.lastStory && newHealth > 0) {\n      this.setState({\n        isHome: false,\n        ended: true,\n        isPlaying: false,\n        userStats: {\n          health: newHealth,\n          lost: false\n        }\n      });\n    } else {\n      let lastStory = false;\n      let newArr = this.state.storyLeft.slice(1);\n\n      if (newArr[0] === this.state.story[this.state.story.length - 1]) {\n        lastStory = true;\n      }\n\n      this.setState({\n        isHome: goHome,\n        ended: ended,\n        storyLeft: newArr,\n        isPlaying: isPlaying,\n        lastStory,\n        userStats: {\n          health: newHealth,\n          lost: theyLost\n        }\n      });\n    }\n  }\n\n  startGame() {\n    this.setState({\n      load: false,\n      isHome: true\n    });\n  }\n\n  render() {\n    if (this.state.isHome) {\n      return React.createElement(Main, {\n        popSetter: x => this.popSetter(x),\n        population: this.state.population,\n        health: this.state.userStats,\n        weather: this.state.weather,\n        story: this.state.story,\n        storyLeft: this.state.storyLeft,\n        change: () => this.change(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      });\n    } else if (this.state.isPlaying) {\n      return React.createElement(Display, {\n        lastStory: this.state.lastStory,\n        health: this.state.userStats,\n        story: this.state.storyLeft[0],\n        change: () => this.change(),\n        lose: (i, x) => this.lose(i, x),\n        nextStory: () => this.nextStory(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      });\n    } else if (this.state.ended) {\n      return React.createElement(EndScreen, {\n        weather: this.state.weather,\n        stats: this.state.userStats,\n        refresh: x => {\n          this.refresh(x);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(Loading, {\n        startGame: () => this.startGame(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default GameController;","map":{"version":3,"sources":["/mnt/c/Users/avmas/Desktop/dangerzone/client/src/controller/GameController.jsx"],"names":["React","Main","axios","Display","BinarySearchTree","iconPicker","Loading","EndScreen","pingURL","process","env","REACT_APP_BACKEND_SERVER","GameController","Component","constructor","props","manualSet","keyWord","details","games","find","game","weather","state","setState","getCoordinates","position","long","coords","longitude","lat","latitude","get","apiKey","then","results","data","getStoryLine","getLocation","navigator","geolocation","getCurrentPosition","isHome","isPlaying","load","ended","lastStory","story","storyLeft","userStats","health","lost","population","Math","floor","random","tornado","cold","earth","refresh","console","log","popSetter","newPopulation","formatData","arr","map","object","newTree","insertAll","scenario","intro","title","background","audio","sound","category","tree","res","storyLine","componentDidMount","change","lose","healthLoss","home","goHome","newHealth","theyLost","newArr","slice","length","startGame","render","x","i","nextStory"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Main from '../pages/main';\nimport axios from 'axios';\nimport Display from '../pages/display';\nimport BinarySearchTree from '../functions/binary';\nimport iconPicker from '../functions/iconPicker';\nimport Loading from '../pages/loading';\nimport EndScreen from '../components/EndScreen/EndScreen';\nimport earth from '../assets/Icons/Earthquake.svg';\nimport cold from '../assets/Icons/ColdWave.svg';\nimport tornado from '../assets/Icons/Hurricane.svg';\nconst pingURL = process.env.REACT_APP_BACKEND_SERVER || 'http://localhost:8080';\n\nclass GameController extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isHome: false,\n            isPlaying: false,\n            load: true,\n            ended: false,\n            lastStory: false,\n            story: [],\n            storyLeft: [],\n            userStats: {\n                health: 100,\n                lost: false\n            },\n            weather: [],\n            population: Math.floor(Math.random() * 2000000) + 250000\n        }\n        this.apiKey = '4774ad80334f760f9b45af484c39e9fe';\n        this.games = [['TORNADO WARNING', tornado, 'wind'], ['DEEP FREEZE', cold, 'freeze'], ['EARTHQUAKE WARNING', earth, 'earth']]\n    }\n\n    refresh(keyWord) {\n        console.log(keyWord)\n        if (!keyWord) {\n            this.getLocation();\n        } else {\n            this.manualSet(keyWord);\n            this.getStoryLine(keyWord);\n        }\n        this.setState({\n            isHome: true,\n            isPlaying: false,\n            ended: false,\n            lastStory: false,\n            userStats: {\n                health: 100,\n                lost: false\n            }\n        })\n    }\n\n    manualSet = (keyWord) => {\n        let details = this.games.find(game => game[2] === keyWord);\n        let weather = this.state.weather[3]\n        if (weather < -20 && details[0] !== 'DEEP FREEZE') {\n            weather = weather + 40;\n        } else if (weather > -40 && details[0] === 'DEEP FREEZE') {\n            weather = weather-40;\n        }\n        this.setState({\n            weather: [...details, weather]\n        })\n    }\n\n    popSetter(newPopulation) {\n        this.setState(\n            {\n                population: newPopulation\n            }\n        )\n    }\n\n\n    formatData(arr) {\n        return arr.map(object => {\n            let newTree = new BinarySearchTree()\n            newTree.insertAll(object.scenario)\n            return {\n                intro: object.intro,\n                title: object.title,\n                background: object.background,\n                audio: object.sound,\n                category: object.category,\n                tree: newTree\n            }\n        })\n    }\n\n    getCoordinates = (position) => {\n        const long = position.coords.longitude;\n        const lat = position.coords.latitude;\n        axios.get('https://api.openweathermap.org/data/2.5/weather?lat='+lat+'&lon='+long+'&appid='+this.apiKey).then(results => {\n          this.setState({\n              weather: iconPicker(results.data)\n          })\n          this.getStoryLine(this.state.weather[2])\n        })\n    }\n\n    getLocation = () => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.getCoordinates);\n        }\n    }\n\n    getStoryLine(category) {\n        axios.get('http://localhost:8080/story/'+category).then(res => {\n            let storyLine = this.formatData(res.data)\n            this.setState({\n                story: storyLine,\n                storyLeft: [...storyLine]\n            })\n        })\n    }\n\n    componentDidMount() {\n        this.getLocation();\n    }\n\n    change() {\n        this.setState({\n            isHome: !this.state.isHome,\n            isPlaying: !this.state.isPlaying\n        })\n    }\n\n    lose(healthLoss, home) {\n\n        let goHome = home;\n        let newHealth = this.state.userStats.health - healthLoss\n        let theyLost = false;\n        let ended = false;\n        let isPlaying = !home;\n        if (newHealth <= 0) {\n            theyLost = true;\n            newHealth = 0;\n            ended = true;\n            isPlaying = false\n            goHome = false\n        }\n        if (this.state.lastStory && newHealth > 0) {\n            this.setState({\n                isHome: false,\n                ended: true,\n                isPlaying: false,\n                userStats: {\n                    health: newHealth,\n                    lost: false\n                }\n            })\n        } else {\n           let lastStory = false;\n            let newArr = this.state.storyLeft.slice(1);\n            if (newArr[0] === this.state.story[this.state.story.length-1]) {\n                lastStory = true\n            }\n            this.setState({\n                isHome: goHome,\n                ended: ended,\n                storyLeft: newArr,\n                isPlaying: isPlaying,\n                lastStory,\n                userStats: {\n                    health: newHealth,\n                    lost: theyLost\n                }\n            }) \n        }\n    }\n\n    startGame() {\n        this.setState({\n            load: false,\n            isHome: true\n        })\n    }\n\n    render() {\n        if (this.state.isHome) {\n            return (\n                <Main popSetter={(x) => this.popSetter(x)} population={this.state.population} health={this.state.userStats} weather={this.state.weather} story={this.state.story} storyLeft={this.state.storyLeft} change={() => this.change()}/>\n            )\n        } else if (this.state.isPlaying) {\n            return <Display lastStory={this.state.lastStory} health={this.state.userStats} story={this.state.storyLeft[0]} change={() => this.change()} lose={(i,x) => this.lose(i,x)} nextStory={() => this.nextStory()}/>;\n        } else if (this.state.ended) {\n            return <EndScreen weather={this.state.weather} stats={this.state.userStats} refresh={(x) => {this.refresh(x)}}/>\n        }\n        else {\n            return <Loading startGame={() => this.startGame()}/>\n        }\n    }\n}\n\nexport default GameController;"]},"metadata":{},"sourceType":"module"}