{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./display.scss';import BackgroundVideo from'../components/BackgroundVideo/BackgroundVideo';import SlideController from'../controller/SlideController';import Intro from'../components/Intro/Intro';var Display=/*#__PURE__*/function(_React$Component){_inherits(Display,_React$Component);function Display(){var _getPrototypeOf2;var _this;_classCallCheck(this,Display);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Display)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={intro:true,showButton:false};return _this;}_createClass(Display,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.audio=new Audio('http://localhost:8080/public/audio/'+this.props.story.audio);this.audio.load();this.audio.loop=true;this.playAudio();setTimeout(function(){_this2.setState({showButton:true});},6000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.audio.pause();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this3=this;if(prevProps.story!==this.props.story){this.audio.pause();this.audio=new Audio('http://localhost:8080/public/audio/'+this.props.story.audio);this.audio.load();this.audio.loop=true;this.playAudio();this.setState({intro:true,showButton:false});setTimeout(function(){_this3.setState({showButton:true});},4000);}}},{key:\"playAudio\",value:function playAudio(){var audioPromise=this.audio.play();if(audioPromise!==undefined){audioPromise.then(function(_){// autoplay started\n}).catch(function(err){// catch dom exception\nconsole.info(err);});}}},{key:\"startStory\",value:function startStory(){this.setState({intro:false});}},{key:\"render\",value:function render(){var _this4=this;if(this.state.intro){return React.createElement(Intro,{showButton:this.state.showButton,intro:this.props.story.intro,startStory:function startStory(){return _this4.startStory();}});}else{return React.createElement(BackgroundVideo,{story:this.props.story},React.createElement(SlideController,{lastStory:this.props.lastStory,health:this.props.health,lose:this.props.lose,story:this.props.story,change:this.props.change,nextStory:this.props.nextStory}));}}}]);return Display;}(React.Component);export default Display;","map":{"version":3,"sources":["/mnt/c/Users/avmas/Desktop/dangerzone/client/src/pages/display.jsx"],"names":["React","BackgroundVideo","SlideController","Intro","Display","state","intro","showButton","audio","Audio","props","story","load","loop","playAudio","setTimeout","setState","pause","prevProps","audioPromise","play","undefined","then","_","catch","err","console","info","startStory","lastStory","health","lose","change","nextStory","Component"],"mappings":"6zBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,gBAAP,CACA,MAAOC,CAAAA,eAAP,KAA4B,+CAA5B,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,C,GAEMC,CAAAA,O,+YAEFC,K,CAAM,CACFC,KAAK,CAAE,IADL,CAEFC,UAAU,CAAE,KAFV,C,gGAKc,iBAChB,KAAKC,KAAL,CAAa,GAAIC,CAAAA,KAAJ,CAAU,sCAAsC,KAAKC,KAAL,CAAWC,KAAX,CAAiBH,KAAjE,CAAb,CACA,KAAKA,KAAL,CAAWI,IAAX,GACA,KAAKJ,KAAL,CAAWK,IAAX,CAAkB,IAAlB,CACA,KAAKC,SAAL,GAEAC,UAAU,CAAC,UAAM,CACb,MAAI,CAACC,QAAL,CAAc,CACVT,UAAU,CAAE,IADF,CAAd,EAGH,CAJS,CAIP,IAJO,CAAV,CAKH,C,mEAEsB,CACnB,KAAKC,KAAL,CAAWS,KAAX,GACH,C,8DAEkBC,S,CAAW,iBAC1B,GAAIA,SAAS,CAACP,KAAV,GAAoB,KAAKD,KAAL,CAAWC,KAAnC,CAA0C,CACtC,KAAKH,KAAL,CAAWS,KAAX,GACA,KAAKT,KAAL,CAAa,GAAIC,CAAAA,KAAJ,CAAU,sCAAsC,KAAKC,KAAL,CAAWC,KAAX,CAAiBH,KAAjE,CAAb,CACA,KAAKA,KAAL,CAAWI,IAAX,GACA,KAAKJ,KAAL,CAAWK,IAAX,CAAkB,IAAlB,CACA,KAAKC,SAAL,GAEA,KAAKE,QAAL,CAAc,CACVV,KAAK,CAAE,IADG,CAEVC,UAAU,CAAE,KAFF,CAAd,EAKAQ,UAAU,CAAC,UAAM,CACb,MAAI,CAACC,QAAL,CAAc,CACVT,UAAU,CAAE,IADF,CAAd,EAGH,CAJS,CAIP,IAJO,CAAV,CAKH,CACJ,C,6CAEW,CACR,GAAMY,CAAAA,YAAY,CAAG,KAAKX,KAAL,CAAWY,IAAX,EAArB,CACA,GAAID,YAAY,GAAKE,SAArB,CAAgC,CAC9BF,YAAY,CACTG,IADH,CACQ,SAAAC,CAAC,CAAI,CACT;AACD,CAHH,EAIGC,KAJH,CAIS,SAAAC,GAAG,CAAI,CACZ;AACAC,OAAO,CAACC,IAAR,CAAaF,GAAb,EACD,CAPH,EAQD,CACJ,C,+CAEY,CACT,KAAKT,QAAL,CAAc,CACVV,KAAK,CAAE,KADG,CAAd,EAGH,C,uCAEQ,iBACL,GAAI,KAAKD,KAAL,CAAWC,KAAf,CAAsB,CAClB,MAAO,qBAAC,KAAD,EAAO,UAAU,CAAE,KAAKD,KAAL,CAAWE,UAA9B,CAA0C,KAAK,CAAE,KAAKG,KAAL,CAAWC,KAAX,CAAiBL,KAAlE,CAAyE,UAAU,CAAE,4BAAM,CAAA,MAAI,CAACsB,UAAL,EAAN,EAArF,EAAP,CACH,CAFD,IAEO,CACH,MAAO,qBAAC,eAAD,EAAiB,KAAK,CAAE,KAAKlB,KAAL,CAAWC,KAAnC,EAA0C,oBAAC,eAAD,EAAiB,SAAS,CAAE,KAAKD,KAAL,CAAWmB,SAAvC,CAAkD,MAAM,CAAE,KAAKnB,KAAL,CAAWoB,MAArE,CAA6E,IAAI,CAAE,KAAKpB,KAAL,CAAWqB,IAA9F,CAAoG,KAAK,CAAE,KAAKrB,KAAL,CAAWC,KAAtH,CAA6H,MAAM,CAAE,KAAKD,KAAL,CAAWsB,MAAhJ,CAAwJ,SAAS,CAAE,KAAKtB,KAAL,CAAWuB,SAA9K,EAA1C,CAAP,CACH,CACJ,C,qBAvEiBjC,KAAK,CAACkC,S,EA0E5B,cAAe9B,CAAAA,OAAf","sourcesContent":["import React from 'react';\nimport './display.scss';\nimport BackgroundVideo from '../components/BackgroundVideo/BackgroundVideo';\nimport SlideController from '../controller/SlideController';\nimport Intro from '../components/Intro/Intro';\n\nclass Display extends React.Component {\n\n    state={\n        intro: true,\n        showButton: false\n    }\n\n    componentDidMount() {\n        this.audio = new Audio('http://localhost:8080/public/audio/'+this.props.story.audio);\n        this.audio.load();\n        this.audio.loop = true;\n        this.playAudio();\n\n        setTimeout(() => {\n            this.setState({\n                showButton: true\n            })\n        }, 6000)\n    }\n\n    componentWillUnmount() {\n        this.audio.pause();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.story !== this.props.story) {\n            this.audio.pause();\n            this.audio = new Audio('http://localhost:8080/public/audio/'+this.props.story.audio);\n            this.audio.load();\n            this.audio.loop = true;\n            this.playAudio();\n\n            this.setState({\n                intro: true,\n                showButton: false\n            })\n\n            setTimeout(() => {\n                this.setState({\n                    showButton: true\n                })\n            }, 4000)\n        }\n    }\n\n    playAudio() {\n        const audioPromise = this.audio.play()\n        if (audioPromise !== undefined) {\n          audioPromise\n            .then(_ => {\n              // autoplay started\n            })\n            .catch(err => {\n              // catch dom exception\n              console.info(err)\n            })\n        }\n    }\n\n    startStory() {\n        this.setState({\n            intro: false\n        })\n    }\n\n    render() {\n        if (this.state.intro) {\n            return <Intro showButton={this.state.showButton} intro={this.props.story.intro} startStory={() => this.startStory()}/>\n        } else {\n            return <BackgroundVideo story={this.props.story}><SlideController lastStory={this.props.lastStory} health={this.props.health} lose={this.props.lose} story={this.props.story} change={this.props.change} nextStory={this.props.nextStory}/></BackgroundVideo>  \n        }\n    }\n}\n\nexport default Display;"]},"metadata":{},"sourceType":"module"}