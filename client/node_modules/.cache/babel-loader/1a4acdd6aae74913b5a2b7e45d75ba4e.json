{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/mnt/c/Users/avmas/Desktop/dangerzone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./Complete.scss';import Health from'../Health/Health';var Complete=/*#__PURE__*/function(_React$Component){_inherits(Complete,_React$Component);function Complete(){var _getPrototypeOf2;var _this;_classCallCheck(this,Complete);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Complete)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={completed:false,died:false,health:_this.props.health.health,interval:''};return _this;}_createClass(Complete,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//If user loses any health at all start interval to show health going down\nif(this.props.story.loss>0){this.setState({interval:setInterval(function(){_this2.setState({health:_this2.state.health-1});},20)});}//If health dips below 0 hide home and next button and prepare for losing screen\nif(this.props.health.health-this.props.story.loss*100<=0){this.setState({died:true});setTimeout(function(){_this2.props.lose(_this2.props.story.loss*100,true);},6000);//User encounters the last scenario in the story prepare for winning screen\n}else if(this.props.lastStory){this.setState({completed:true});setTimeout(function(){_this2.props.lose(_this2.props.story.loss*100,true);},6000);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){//Stop showing health decrease when the health meter has shown the complete percent lost\nif(this.state.interval!==''&&(this.state.health===this.props.health.health-this.props.story.loss*100||this.state.health===0)){clearInterval(this.state.interval);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.state.interval);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"complete\"},React.createElement(\"div\",{className:\"complete__prompt\"},this.props.story.story),React.createElement(Health,{health:this.state.health}),!this.state.died&&!this.state.completed&&React.createElement(\"div\",{className:\"complete__wrap\"},React.createElement(\"div\",{className:\"complete__button\",onClick:function onClick(){return _this3.props.lose(_this3.props.story.loss*100,true);}},\"Home\"),React.createElement(\"div\",{className:\"complete__button\",onClick:function onClick(){return _this3.props.lose(_this3.props.story.loss*100,false);}},\"Next\")));}}]);return Complete;}(React.Component);export default Complete;","map":{"version":3,"sources":["/mnt/c/Users/avmas/Desktop/dangerzone/client/src/components/Complete/Complete.jsx"],"names":["React","Health","Complete","state","completed","died","health","props","interval","story","loss","setState","setInterval","setTimeout","lose","lastStory","clearInterval","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Complete.scss';\nimport Health from '../Health/Health';\n\nclass Complete extends React.Component {\n\n    state = {\n        completed: false,\n        died: false,\n        health: this.props.health.health,\n        interval: ''\n    }\n\n    componentDidMount() {\n        //If user loses any health at all start interval to show health going down\n        if (this.props.story.loss > 0) {\n            this.setState({\n                interval: setInterval(() => {\n                    this.setState({\n                        health: this.state.health - 1\n                    })\n                }, 20)\n            })\n        }\n\n        //If health dips below 0 hide home and next button and prepare for losing screen\n        if (this.props.health.health - this.props.story.loss*100 <= 0) {\n            this.setState({\n                died: true\n            })\n            setTimeout(() => {\n                this.props.lose(this.props.story.loss*100, true);\n            }, 6000)\n        //User encounters the last scenario in the story prepare for winning screen\n        } else if (this.props.lastStory) {\n            this.setState({\n                completed: true\n            })\n            setTimeout(() => {\n                this.props.lose(this.props.story.loss*100, true);\n            }, 6000)\n        }\n    }\n\n    componentDidUpdate() {\n        //Stop showing health decrease when the health meter has shown the complete percent lost\n        if (this.state.interval !== '' && (this.state.health === this.props.health.health - this.props.story.loss*100 || this.state.health === 0)) {\n            clearInterval(this.state.interval)\n        }\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.state.interval);\n    }\n\n    render() {\n        return (\n            <div className='complete'>\n                <div className='complete__prompt'>{this.props.story.story}</div>\n                <Health health={this.state.health}/>\n                {!this.state.died && !this.state.completed && <div className='complete__wrap'>\n                    <div className='complete__button' onClick={() => this.props.lose(this.props.story.loss*100, true)}>Home</div>\n                    <div className='complete__button' onClick={() => this.props.lose(this.props.story.loss*100, false)}>Next</div>\n                </div>}\n            </div>\n        )\n    }\n}\n\nexport default Complete;"]},"metadata":{},"sourceType":"module"}