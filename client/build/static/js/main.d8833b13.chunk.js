(this.webpackJsonpdangerzone=this.webpackJsonpdangerzone||[]).push([[0],[,,,,,,,function(t,e,a){t.exports=a.p+"static/media/Earthquake.56851e29.svg"},function(t,e,a){t.exports=a.p+"static/media/ColdWave.1bb3d552.svg"},function(t,e,a){t.exports=a.p+"static/media/Hurricane.35375e9f.svg"},function(t,e,a){t.exports=a.p+"static/media/clipboard-clip.699d568f.png"},,,,,,,,,,,,,,function(t,e,a){t.exports=a.p+"static/media/Danger.b5037a66.svg"},function(t,e,a){t.exports=a.p+"static/media/checkmark.f3853eaf.png"},function(t,e,a){t.exports=a.p+"static/media/lose.e7379e4c.png"},function(t,e,a){t.exports=a.p+"static/media/win.9670af2e.png"},function(t,e,a){t.exports=a(66)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e){},function(t,e,a){},,,,,,,,,,,,,,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),o=a(23),r=a.n(o);a(33),a(34),a(35);var i=function(){return s.a.createElement("header",{className:"bar"},s.a.createElement("div",{className:"bar__box"},s.a.createElement("h1",{className:"bar__title"},s.a.createElement("span",{className:"bar__slant"},"ZONE DANGER ZONE "),"DANGER ZONE ",s.a.createElement("span",{className:"bar__slant"},"DANGER ZONE DANGER"))))},l=a(13),c=a(1),h=a(2),u=a(4),p=a(3),m=a(5),d=(a(36),a(37),a(24)),f=a.n(d),y=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(s)))).state={population:a.props.population,interval:""},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.setState({population:this.props.population,interval:setInterval((function(){t.setState({population:t.state.population+1})}),3e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.interval),this.props.popSetter(this.state.population)}},{key:"numberWithCommas",value:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){return!this.props.weather.length>0?null:s.a.createElement("div",{className:"news"},s.a.createElement("div",{className:"news__box"},s.a.createElement("img",{src:this.props.weather[1],className:"news__icon",alt:"Weather warning icon"}),s.a.createElement("div",{className:"news__font"},s.a.createElement("h3",{className:"news__weather flash"},this.props.weather[0]))),s.a.createElement("div",{className:"news__wrap"},s.a.createElement("div",{className:"news__box--small"},s.a.createElement("img",{src:f.a,className:"news__icon--small",alt:"Skull and crossbones icon"}),s.a.createElement("h4",{className:"news__num"},this.numberWithCommas(this.state.population))),s.a.createElement("div",{className:"news__box--small"},s.a.createElement("h4",{className:"news__temp"},this.props.weather[3],"\xb0C"))))}}]),e}(s.a.Component),v=a(10),E=a.n(v);a(38);var _=function(t){return s.a.createElement("div",null,s.a.createElement("img",{src:E.a,className:"button__task",onClick:t.display,alt:"Cartoon clipboard"}),s.a.createElement("div",{className:"button__alert getBig"},"!"))},g=(a(39),a(25)),N=a.n(g),S=a(11),b=a.n(S),O=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(s)))).state={displayBoard:!1},a.toggle=function(){a.setState({displayBoard:!a.state.displayBoard})},a.stopPropagation=function(t){t.stopPropagation()},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"displayList",value:function(){var t=this,e=this.props.story.length-this.props.storyLeft.length,a=[];return this.props.story.forEach((function(n,o){o===e?a.push(s.a.createElement("div",{className:"story__row",key:b()()},s.a.createElement("div",{className:"story__check"}),s.a.createElement("h3",{className:"story__stage--current",onClick:t.props.change},n.title))):o>e?a.push(s.a.createElement("div",{className:"story__row",key:b()()},s.a.createElement("div",{className:"story__check"}),s.a.createElement("h3",{className:"story__stage--blur"},n.title))):a.push(s.a.createElement("div",{className:"story__row",key:b()()},s.a.createElement("div",{className:"story__check"},s.a.createElement("img",{src:N.a,className:"story__mark",alt:"Green check mark"})),s.a.createElement("h3",{className:"story__stage"},n.title)))})),a}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,this.state.displayBoard&&s.a.createElement("div",{className:"story",onClick:this.toggle},s.a.createElement("div",{className:"story__wrap",onClick:this.stopPropagation},s.a.createElement("img",{src:E.a,className:"story__board",alt:"Cartoon clipboard"}),s.a.createElement("div",{className:"story__write"},s.a.createElement("h3",{className:"story__title"},"CHECKLIST"),this.displayList()))),!this.state.displayBoard&&s.a.createElement(_,{display:function(){return t.toggle()}}))}}]),e}(s.a.Component);a(41);var k=function(t){return s.a.createElement("div",{className:"health__box"},s.a.createElement("h4",{className:"health__title"},"HEALTH"),s.a.createElement("div",{className:"health"},s.a.createElement("div",{className:"health__bar",style:{width:"".concat(t.health,"%")}})))},w=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return s.a.createElement("main",{className:"page"},s.a.createElement(y,{popSetter:this.props.popSetter,weather:this.props.weather,population:this.props.population}),s.a.createElement(O,{story:this.props.story,storyLeft:this.props.storyLeft,change:this.props.change}),s.a.createElement("div",{className:"page__health"},s.a.createElement(k,{health:this.props.health.health})))}}]),e}(s.a.Component),j=a(12),C=a.n(j),A=(a(59),a(60),function(t){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_SERVER||"http://localhost:8080";return t.story.background?s.a.createElement("div",{style:{backgroundImage:"url(".concat(e+t.story.background,")"),backgroundPosition:"center",backgroundSize:"cover"},className:"video"},t.children):null}),D=(a(61),function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(s)))).state={completed:!1,died:!1,health:a.props.health.health,interval:""},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.story.loss>0&&this.setState({interval:setInterval((function(){t.setState({health:t.state.health-1})}),20)}),this.props.health.health-100*this.props.story.loss<=0?(this.setState({died:!0}),setTimeout((function(){t.props.lose(100*t.props.story.loss,!0)}),6e3)):this.props.lastStory&&(this.setState({completed:!0}),setTimeout((function(){t.props.lose(100*t.props.story.loss,!0)}),6e3))}},{key:"componentDidUpdate",value:function(){""===this.state.interval||this.state.health!==this.props.health.health-100*this.props.story.loss&&0!==this.state.health||clearInterval(this.state.interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.interval)}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"complete"},s.a.createElement("div",{className:"complete__prompt"},this.props.story.story),s.a.createElement(k,{health:this.state.health}),!this.state.died&&!this.state.completed&&s.a.createElement("div",{className:"complete__wrap"},s.a.createElement("div",{className:"complete__button",onClick:function(){return t.props.lose(100*t.props.story.loss,!0)}},"Home"),s.a.createElement("div",{className:"complete__button",onClick:function(){return t.props.lose(100*t.props.story.loss,!1)}},"Next")))}}]),e}(s.a.Component)),R=(a(62),function(t){if(t.story){var e=t.story,a=e.story,n=e.leftOption,o=e.rightOption,r=e.left,i=e.right;return s.a.createElement("div",{className:"slide"},s.a.createElement("div",{className:"slide__q"},a),s.a.createElement("div",{className:"slide__wrap"},s.a.createElement("div",{className:"slide__box",onClick:function(){return t.nextHandler(r)}},n),s.a.createElement("div",{className:"slide__box",onClick:function(){return t.nextHandler(i)}},o)))}return null}),T=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(s)))).state={stage:"",finish:!1},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){this.setState({stage:this.props.story.tree.root})}},{key:"componentDidUpdate",value:function(t){t.story!==this.props.story&&this.setState({stage:this.props.story.tree.root,finish:!1})}},{key:"nextSlide",value:function(t){t.right||t.left?this.setState({stage:t}):this.setState({finish:!0,stage:t})}},{key:"render",value:function(){var t=this;return this.state.finish?s.a.createElement(D,{lastStory:this.props.lastStory,health:this.props.health,story:this.state.stage,change:this.props.change,lose:this.props.lose,nextStory:this.props.nextStory}):s.a.createElement(R,{story:this.state.stage,nextHandler:function(e){return t.nextSlide(e)}})}}]),e}(s.a.Component),L=(a(63),function(t){return s.a.createElement("div",{className:"intro"},s.a.createElement("h2",{className:"intro__story"},t.intro),t.showButton&&s.a.createElement("h3",{className:"intro__button fade-in",onClick:t.startStory},"NEXT"))}),P=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(s)))).state={intro:!0,showButton:!1},a.pingURL=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_SERVER||"http://localhost:8080",a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.audio=new Audio(this.pingURL+this.props.story.audio),this.audio.load(),this.audio.loop=!0,this.playAudio(),setTimeout((function(){t.setState({showButton:!0})}),6e3)}},{key:"componentWillUnmount",value:function(){this.audio.pause()}},{key:"componentDidUpdate",value:function(t){var e=this;t.story!==this.props.story&&(this.audio.pause(),this.audio=new Audio(this.pingURL+this.props.story.audio),this.audio.load(),this.audio.loop=!0,this.playAudio(),this.setState({intro:!0,showButton:!1}),setTimeout((function(){e.setState({showButton:!0})}),4e3))}},{key:"playAudio",value:function(){var t=this.audio.play();void 0!==t&&t.then((function(t){})).catch((function(t){console.info(t)}))}},{key:"startStory",value:function(){this.setState({intro:!1})}},{key:"render",value:function(){var t=this;return this.state.intro?s.a.createElement(L,{showButton:this.state.showButton,intro:this.props.story.intro,startStory:function(){return t.startStory()}}):s.a.createElement(A,{story:this.props.story},s.a.createElement(T,{lastStory:this.props.lastStory,health:this.props.health,lose:this.props.lose,story:this.props.story,change:this.props.change,nextStory:this.props.nextStory}))}}]),e}(s.a.Component),x=function(){function t(){Object(c.a)(this,t),this.root=null}return Object(h.a)(t,[{key:"insertAll",value:function(t){var e=this;t.forEach((function(t){e.insert(t)}))}},{key:"insert",value:function(t){null===this.root?this.root=t:this.insertNode(this.root,t)}},{key:"insertNode",value:function(t,e){e.value<t.value?null===t.left?t.left=e:this.insertNode(t.left,e):null===t.right?t.right=e:this.insertNode(t.right,e)}}]),t}(),H=a(7),W=a.n(H),B=a(8),I=a.n(B),U=a(9),G=a.n(U),K=function(t){return t.wind.speed>8?["TORNADO WARNING",G.a,"wind",Math.round(t.main.temp-273.15)]:t.weather[0].id>=600&&t.weather[0].id<623||t.main.temp<273.15?["DEEP FREEZE",I.a,"freeze",Math.round(t.main.temp-273.15-40)]:["EARTHQUAKE WARNING",W.a,"earth",Math.round(t.main.temp-273.15)]},M=(a(64),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout((function(){t.props.startGame()}),4e3)}},{key:"render",value:function(){return s.a.createElement("div",{className:"load"},s.a.createElement("div",{className:"load__container"},s.a.createElement("h2",{className:"load__title"},"LOADING"),s.a.createElement("div",{className:"load__visual"},s.a.createElement("span",null),s.a.createElement("span",null),s.a.createElement("span",null))))}}]),e}(s.a.Component)),Z=(a(65),a(26)),z=a.n(Z),F=a(27),V=a.n(F),Y=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(p.a)(e).call(this,t))).showGames=function(){var t=[];return a.games.filter((function(t){return t.type[0]!==a.props.weather[2]})).forEach((function(e){t.push(s.a.createElement("img",{src:e.type[1],className:"end__icon",onClick:function(){return a.props.refresh(e.type[0])},alt:"disaster icon"}))})),t},a.state={health:0,interval:""},a.games=[{type:["earth",W.a]},{type:["freeze",I.a]},{type:["wind",G.a]}],a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.stats.lost||this.setState({interval:setInterval((function(){t.setState({health:t.state.health+1})}),20)})}},{key:"componentDidUpdate",value:function(){this.props.stats.health===this.state.health&&clearInterval(this.state.interval)}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"end"},this.props.stats.lost&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:z.a,className:"end__image",alt:"Skull with missing front teeth"}),s.a.createElement("h2",{className:"end__title"},"YOU LOSE")),!this.props.stats.lost&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"end__icon-box"},s.a.createElement("h3",{className:"end__small"},"TRY THE OTHER GAMES!"),this.showGames()),s.a.createElement("img",{src:V.a,className:"end__image",alt:"Skull with old school pilot hat on"}),s.a.createElement("h2",{className:"end__title"},"YOU WIN"),s.a.createElement("h3",{className:"end__percent"},this.state.health,"% HEALTH REMAINING")),s.a.createElement("div",{className:"end__button",onClick:function(){return t.props.refresh(null)}},"PLAY AGAIN"))}}]),e}(s.a.Component),q=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_SERVER||"http://localhost:8080",J=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(u.a)(this,Object(p.a)(e).call(this,t))).manualSet=function(t){var e=a.games.find((function(e){return e[2]===t})),n=a.state.weather[3];n<-20&&"DEEP FREEZE"!==e[0]?n+=40:n>-40&&"DEEP FREEZE"===e[0]&&(n-=40),a.setState({weather:[].concat(Object(l.a)(e),[n])})},a.getCoordinates=function(t){var e=t.coords.longitude,n=t.coords.latitude;C.a.get("https://api.openweathermap.org/data/2.5/weather?lat="+n+"&lon="+e+"&appid="+a.apiKey).then((function(t){a.setState({weather:K(t.data)}),a.getStoryLine(a.state.weather[2])}))},a.getLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(a.getCoordinates)},a.state={isHome:!1,isPlaying:!1,load:!0,ended:!1,lastStory:!1,story:[],storyLeft:[],userStats:{health:100,lost:!1},weather:[],population:Math.floor(2e6*Math.random())+25e4},a.apiKey="4774ad80334f760f9b45af484c39e9fe",a.games=[["TORNADO WARNING",G.a,"wind"],["DEEP FREEZE",I.a,"freeze"],["EARTHQUAKE WARNING",W.a,"earth"]],a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"refresh",value:function(t){console.log(t),t?(this.manualSet(t),this.getStoryLine(t)):this.getLocation(),this.setState({isHome:!0,isPlaying:!1,ended:!1,lastStory:!1,userStats:{health:100,lost:!1}})}},{key:"popSetter",value:function(t){this.setState({population:t})}},{key:"formatData",value:function(t){return t.map((function(t){var e=new x;return e.insertAll(t.scenario),{intro:t.intro,title:t.title,background:t.background,audio:t.sound,category:t.category,tree:e}}))}},{key:"getStoryLine",value:function(t){var e=this;C.a.get(q+"/story/"+t).then((function(t){var a=e.formatData(t.data);e.setState({story:a,storyLeft:Object(l.a)(a)})}))}},{key:"componentDidMount",value:function(){this.getLocation()}},{key:"change",value:function(){this.setState({isHome:!this.state.isHome,isPlaying:!this.state.isPlaying})}},{key:"lose",value:function(t,e){var a=e,n=this.state.userStats.health-t,s=!1,o=!1,r=!e;if(n<=0&&(s=!0,n=0,o=!0,r=!1,a=!1),this.state.lastStory&&n>0)this.setState({isHome:!1,ended:!0,isPlaying:!1,userStats:{health:n,lost:!1}});else{var i=!1,l=this.state.storyLeft.slice(1);l[0]===this.state.story[this.state.story.length-1]&&(i=!0),this.setState({isHome:a,ended:o,storyLeft:l,isPlaying:r,lastStory:i,userStats:{health:n,lost:s}})}}},{key:"startGame",value:function(){this.setState({load:!1,isHome:!0})}},{key:"render",value:function(){var t=this;return this.state.isHome?s.a.createElement(w,{popSetter:function(e){return t.popSetter(e)},population:this.state.population,health:this.state.userStats,weather:this.state.weather,story:this.state.story,storyLeft:this.state.storyLeft,change:function(){return t.change()}}):this.state.isPlaying?s.a.createElement(P,{lastStory:this.state.lastStory,health:this.state.userStats,story:this.state.storyLeft[0],change:function(){return t.change()},lose:function(e,a){return t.lose(e,a)},nextStory:function(){return t.nextStory()}}):this.state.ended?s.a.createElement(Y,{weather:this.state.weather,stats:this.state.userStats,refresh:function(e){t.refresh(e)}}):s.a.createElement(M,{startGame:function(){return t.startGame()}})}}]),e}(s.a.Component);var Q=function(){return s.a.createElement("div",null,s.a.createElement(i,null),s.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[28,1,2]]]);
//# sourceMappingURL=main.d8833b13.chunk.js.map